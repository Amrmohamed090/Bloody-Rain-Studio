{% extends "app/base.html" %}
{% block content %}
{% load static %}

<!-- Projects Start -->
<div class="container-fluid container-xxl py-3 project-container">
    <div class="container-fluid">
        <div class="row mt-n2 wow fadeInUp" data-wow-delay="0.3s">
            <div class="col-12 text-center">
                <ul class="list-inline mb-5" id="portfolio-flters">
                    <li class="mx-2 {% if active == 20 %}active{% endif %}" data-filter="*" >All</li>
                    {% for service in services %}
                    <li class="mx-2 {% if active == service.id %}active{% endif %}" data-filter=".service{{ service.id }}" data-service-id="{{ service.id }}">{{ service.title }}</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        <div class="row g-4 portfolio-container">
            {% for project in projects %}
            <div class="col-lg-4 col-md-6 portfolio-item service{{ project.project_category.id }} wow fadeInUp" data-category="{{ project.project_category.id }}" data-wow-delay="0.1s">
                <div class="rounded overflow-hidden">
                    <div class="position-relative overflow-hidden">
                        <img class="img-fluid w-100" src="{{ project.project_thumbnail.image.url }}" alt="{{ project.project_thumbnail.image.name }}">
                        <div class="portfolio-overlay">
                            <a class="btn btn-square btn-outline-light mx-1" href="{{ project.project_thumbnail.image.url }}" data-fslightbox="gallery"><i class="fa fa-eye"></i></a>
                            <a class="btn btn-square btn-outline-light mx-1" href="{% url 'app-project' project.id %}"><i class="fa fa-link"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
<!-- end work section -->
<script>
   document.addEventListener("DOMContentLoaded", function () {
        var serviceTabs = document.querySelectorAll("#portfolio-flters li");
        serviceTabs.forEach(function (tab) {
            tab.addEventListener("click", function () {
                
                var serviceId = this.getAttribute("data-service-id")
                console.log(serviceId);
                var currentUrl = window.location.href;
                var newUrl;
                if (serviceId !== null) {
                    console.log("you tapped on not null")
                    if (currentUrl.includes("?pageid=")) {
                        newUrl = currentUrl.replace(/(pageid=)[^&]+/, '$1' + serviceId);
                    } else {
                        newUrl = currentUrl + "?pageid=" + serviceId;
                    }
                } else {
                    newUrl = currentUrl.split('?')[0];
                    
                }
                console.log(serviceId)
                console.log(newUrl)
                window.history.replaceState({}, "", newUrl);
            });
        });
    });
</script>
{% endblock content %}

